[tools]
go = "1.24"

[tasks.build]
run = "go build -o bin/wb ./cmd/wb"
description = "Build the wb binary"

[tasks.dev]
description = "Run wb in a temporary directory"
depends = ["build"]
run = """
#!/usr/bin/env bash
set -e
DIR=$(mktemp -d)
echo "Running in $DIR"
cd "$DIR"
{{config_root}}/bin/wb "$@"
echo ""
echo "Working directory: $DIR"
"""

[tasks.test]
run = "go test ./..."
description = "Run all tests"

[tasks.fmt]
run = "go fmt ./..."
description = "Format Go code"

[tasks.lint]
run = "go vet ./..."
description = "Run linter"

[tasks.check]
depends = ["fmt", "lint"]
description = "Format and lint the project"

[tasks.tidy]
run = "go mod tidy"
description = "Tidy go.mod"
